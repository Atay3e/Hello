<!DOCTYPE html><html lang="zh"><meta charset="utf-8">
<title>PSI 实时读数（data.gov.sg）</title>
<body style="font-family:'Segoe UI','Noto Sans SC',sans-serif;margin:40px;color:#222;background:#fafbfc;">
<h2 style="margin-bottom:4px">新加坡 PSI 实时读数</h2>
<p style="margin-top:0;color:#555">数据源：<code>https://api.data.gov.sg/v1/environment/psi</code></p>

<table border="1" cellspacing="0" cellpadding="8" style="border-collapse:collapse;width:100%;max-width:900px;background:white;box-shadow:0 0 8px rgba(0,0,0,.1)">
<thead style="background:#f3f6f9">
<tr>
<th style="text-align:left">读数项<br><small style="color:#666;font-weight:normal">Reading Type</small></th>
<th>North</th><th>South</th><th>East</th><th>West</th><th>Central</th>
</tr>
</thead>
<tbody id="tb"></tbody>
</table>

<script>
const KEYS=[
  ["臭氧子指数","O₃ Sub-index","o3_sub_index"],
  ["PM10 24小时平均","PM10 24-hour","pm10_twenty_four_hourly"],
  ["PM10 子指数","PM10 Sub-index","pm10_sub_index"],
  ["一氧化碳子指数","CO Sub-index","co_sub_index"],
  ["PM2.5 24小时平均","PM2.5 24-hour","pm25_twenty_four_hourly"],
  ["二氧化硫子指数","SO₂ Sub-index","so2_sub_index"],
  ["CO 8小时最大值","CO 8-hour max","co_eight_hour_max"],
  ["NO₂ 1小时最大值","NO₂ 1-hour max","no2_one_hour_max"],
  ["SO₂ 24小时平均","SO₂ 24-hour","so2_twenty_four_hourly"],
  ["PM2.5 子指数","PM2.5 Sub-index","pm25_sub_index"],
  ["PSI 24小时指数","PSI 24-hour","psi_twenty_four_hourly"],
  ["O₃ 8小时最大值","O₃ 8-hour max","o3_eight_hour_max"]
];
const REG=["north","south","east","west","central"];

(async()=>{
  let d;
  try{
    const r=await fetch("https://api.data.gov.sg/v1/environment/psi",{cache:"no-store"});
    d=await r.json();
  }catch(e){
    document.getElementById("tb").innerHTML="<tr><td colspan='6'>获取失败</td></tr>";return;
  }
  const rd=d?.items?.[0]?.readings||{};
  const tb=document.getElementById("tb");
  KEYS.forEach(([cn,en,k],i)=>{
    const bg=i%2?"#f9fbfd":"white";
    let row=`<td style='text-align:left;background:${bg}'><div style='font-size:16px;font-weight:600'>${cn}</div>
             <div style='font-size:12px;color:#666'>${en}<br><small>${k}</small></div></td>`;
    REG.forEach(r=>{
      const v=rd?.[k]?.[r];
      row+=`<td style='text-align:right;background:${bg}'>${v==null?'—':(+v).toFixed(1)}</td>`;
    });
    tb.insertAdjacentHTML("beforeend","<tr>"+row+"</tr>");
  });
})();
</script>
</body></html>
