<!DOCTYPE html><html lang="zh"><meta charset="utf-8">
<title>PSI 实时读数（data.gov.sg）</title>
<body style="font-family:system-ui;margin:20px;font-size:14px">
<h3>PSI 实时读数（data.gov.sg）</h3>
<div>API: <code>https://api.data.gov.sg/v1/environment/psi</code></div>
<table border="1" cellspacing="0" cellpadding="6">
<thead><tr>
<th>读数项<br><small>Reading Type</small></th>
<th>national</th><th>north</th><th>south</th><th>east</th><th>west</th><th>central</th>
</tr></thead><tbody id="tb"></tbody></table>

<script>
const KEYS=[
  ["臭氧子指数","O₃ Sub-index","o3_sub_index"],
  ["PM10 24小时平均","PM10 24-hour","pm10_twenty_four_hourly"],
  ["PM10 子指数","PM10 Sub-index","pm10_sub_index"],
  ["一氧化碳子指数","CO Sub-index","co_sub_index"],
  ["PM2.5 24小时平均","PM2.5 24-hour","pm25_twenty_four_hourly"],
  ["二氧化硫子指数","SO₂ Sub-index","so2_sub_index"],
  ["CO 8小时最大值","CO 8-hour max","co_eight_hour_max"],
  ["NO₂ 1小时最大值","NO₂ 1-hour max","no2_one_hour_max"],
  ["SO₂ 24小时平均","SO₂ 24-hour","so2_twenty_four_hourly"],
  ["PM2.5 子指数","PM2.5 Sub-index","pm25_sub_index"],
  ["PSI 24小时指数","PSI 24-hour","psi_twenty_four_hourly"],
  ["O₃ 8小时最大值","O₃ 8-hour max","o3_eight_hour_max"]
];
const REG=["national","north","south","east","west","central"];

(async()=>{
  let d;
  try{
    const r=await fetch("https://api.data.gov.sg/v1/environment/psi",{cache:"no-store"});
    d=await r.json();
  }catch(e){
    tb.innerHTML=`<tr><td colspan="7">获取失败</td></tr>`;return;
  }
  const rd=d?.items?.[0]?.readings||{};
  const tb=document.getElementById("tb");
  KEYS.forEach(([cn,en,k])=>{
    let row=`<td><div style='font-size:16px'>${cn}</div><div style='font-size:12px;color:#555'>${en}<br><small>${k}</small></div></td>`;
    REG.forEach(r=>{
      const v=rd?.[k]?.[r];
      row+=`<td>${v==null?'—':(+v).toFixed(1)}</td>`;
    });
    tb.insertAdjacentHTML("beforeend","<tr>"+row+"</tr>");
  });
})();
</script>
</body></html>
